<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hypertension Risk Assessment</title>

<style>
/* ===== GLOBAL ===== */
body {
    font-family: "Segoe UI", Tahoma, sans-serif;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    /* colorful gradient + morning yoga image */
    background: linear-gradient(135deg, #74ebd5, #acb6e5, #fbc2eb), url('https://source.unsplash.com/1920x1080/?sunrise,yoga') no-repeat center/cover;
}

/* ===== CARD ===== */
.card {
    background: rgba(255, 255, 255, 0.95);
    padding: 0;
    border-radius: 18px;
    width: 500px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.3);
    overflow: hidden;
}

/* ===== HEADER ===== */
.form-header {
    background: linear-gradient(to right, #36d1dc, #5b86e5);
    padding: 18px;
}

.form-header h2 {
    margin: 0;
    color: white;
    text-align: center;
}

/* ===== CONTENT ===== */
.card-content {
    padding: 30px;
}

/* ===== TEXT ===== */
h2, h3 {
    text-align: center;
    color: #2c3e50;
}

p {
    text-align: center;
    color: #555;
    font-size: 15px;
}

/* ===== FORM ===== */
label {
    font-weight: 600;
    margin-top: 12px;
    display: block;
    color: #34495e;
}

input, select {
    width: 100%;
    padding: 9px;
    margin-top: 5px;
    border-radius: 8px;
    border: 1px solid #ccc;
}

/* ===== BUTTON ===== */
button {
    width: 100%;
    margin-top: 20px;
    padding: 12px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background: linear-gradient(to right, #36d1dc, #5b86e5);
    color: white;
}

button:hover {
    opacity: 0.9;
}

/* ===== RESULT ===== */
.result {
    margin-top: 20px;
    padding: 18px;
    border-radius: 12px;
    font-size: 15px;
}

/* ===== UTILITY ===== */
.hidden {
    display: none;
}

ul {
    margin-top: 5px;
}
</style>
</head>

<body>

<!-- ===== WELCOME ===== -->
<div class="card" id="welcome">
    <div class="card-content">
        <h2>üëã Welcome Human!</h2>
        <p>Let‚Äôs check if your BP is chill üòé or needs attention üíä</p>
        <p>
            This application helps you understand your risk of hypertension
            based on lifestyle and health factors.
        </p>
        <p>
            Results are for awareness purposes only and not a medical diagnosis.
        </p>
        
        <button onclick="start()">Start Assessment</button>
    </div>
</div>

<!-- ===== FORM ===== -->
<div class="card hidden" id="form">

<header class="form-header">
    <h2>ü©∫ Health Information</h2>
</header>

<div class="card-content">

<label>Age</label>
<input type="number" id="age" placeholder="Enter your age">

<label>Salt Intake</label>
<select id="salt">
<option disabled selected>Select</option>
<option value="2">Low</option>
<option value="5">Moderate</option>
<option value="8">High</option>
</select>

<label>Stress Level</label>
<select id="stress">
<option disabled selected>Select</option>
<option value="5">Low</option>
<option value="10">Moderate</option>
<option value="18">High</option>
</select>

<label>Physical Activity</label>
<select id="activity">
<option disabled selected>Select</option>
<option value="5">Regular</option>
<option value="3">Occasional</option>
<option value="0">None</option>
</select>

<label>BMI Category</label>
<select id="bmi">
<option disabled selected>Select</option>
<option value="22">Normal</option>
<option value="28">Overweight</option>
<option value="35">Obese</option>
</select>

<label>Alcohol Consumption</label>
<select id="alcohol">
<option disabled selected>Select</option>
<option value="0">No</option>
<option value="1">Occasional</option>
<option value="3">Regular</option>
</select>

<label>Sleep Duration</label>
<select id="sleep">
<option disabled selected>Select</option>
<option value="8">7‚Äì8 hours</option>
<option value="6">5‚Äì6 hours</option>
<option value="4">Less than 5 hours</option>
</select>

<label>Diet Quality</label>
<select id="diet">
<option disabled selected>Select</option>
<option value="5">Healthy</option>
<option value="3">Average</option>
<option value="1">Unhealthy</option>
</select>

<label>Family History</label>
<select id="family">
<option disabled selected>Select</option>
<option value="0">No</option>
<option value="1">Yes</option>
</select>

<label>Smoking Status</label>
<select id="smoking">
<option disabled selected>Select</option>
<option value="0">Non-Smoker</option>
<option value="1">Smoker</option>
</select>

<button onclick="predict()">Check Risk</button>

<div id="result" class="result"></div>

</div>
</div>

<script>
function start() {
    welcome.classList.add("hidden");
    form.classList.remove("hidden");
}

// Function to get personalized risk factors and tips
function getRiskFactors() {
    let reasons = [];
    let dietTips = [];
    let lifestyleTips = [];

    if (Number(salt.value) >= 8) reasons.push("High salt intake");
    if (Number(activity.value) <= 3) reasons.push("Low physical activity");
    if (Number(stress.value) >= 10 || Number(sleep.value) < 6) reasons.push("High stress and poor sleep");
    if (Number(bmi.value) >= 28) reasons.push("Overweight or Obese BMI");
    if (Number(diet.value) <= 3) reasons.push("Unhealthy diet");
    if (Number(smoking.value) === 1 || Number(alcohol.value) >= 3) reasons.push("Smoking or high alcohol consumption");

    // Enhanced Diet Tips
    if (Number(diet.value) <= 3) {
        dietTips.push("Eat more fruits and vegetables like spinach, broccoli, and citrus fruits");
        dietTips.push("Include whole grains like oats, quinoa, and brown rice");
        dietTips.push("Limit processed foods, sugary drinks, and high-salt items");
        dietTips.push("Include low-fat dairy and lean proteins like fish or chicken");
        dietTips.push("Drink plenty of water and stay hydrated");
    }

    // Enhanced Lifestyle Tips
    if (Number(activity.value) <= 3) lifestyleTips.push("Walk, jog, or exercise 30‚Äì60 minutes daily");
    if (Number(stress.value) >= 10) lifestyleTips.push("Practice yoga, meditation, or deep-breathing exercises");
    if (Number(sleep.value) < 6) lifestyleTips.push("Maintain a proper sleep schedule of 7‚Äì8 hours per night");
    if (Number(smoking.value) === 1) lifestyleTips.push("Quit smoking and avoid second-hand smoke");
    if (Number(alcohol.value) >= 3) lifestyleTips.push("Limit alcohol intake to occasional consumption");
    if (Number(activity.value) > 3) lifestyleTips.push("Maintain regular physical activity for heart health");
    if (Number(diet.value) > 3) lifestyleTips.push("Continue a balanced diet rich in fiber and vitamins");
    if (Number(stress.value) < 10) lifestyleTips.push("Keep stress low with hobbies or relaxation techniques");

    return { reasons, dietTips, lifestyleTips };
}

function predict() {
    fetch("http://127.0.0.1:5000/predict", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
            Age: Number(age.value),
            Salt_Intake: Number(salt.value),
            Stress_Score: Number(stress.value),
            Physical_Activity: Number(activity.value),
            BMI: Number(bmi.value),
            Alcohol_Consumption: Number(alcohol.value),
            Sleep_Duration: Number(sleep.value),
            Diet_Quality: Number(diet.value),
            Family_History: Number(family.value),
            Smoking_Status: Number(smoking.value)
        })
    })
    .then(res => res.json())
    .then(data => {
        let r = document.getElementById("result");

        if (data.prediction.includes("Has")) {
            let { reasons, dietTips, lifestyleTips } = getRiskFactors();

            r.style.background = "#fdecea";
            r.style.color = "#c0392b";

            r.innerHTML = `
            <b>‚ö† Hypertension Risk Detected</b><br><br>
            ${reasons.length > 0 ? `<b>Possible Reasons:</b><ul>${reasons.map(x=>`<li>${x}</li>`).join('')}</ul>` : ''}
            ${dietTips.length > 0 ? `<b>Balanced Diet Suggestions:</b><ul>${dietTips.map(x=>`<li>${x}</li>`).join('')}</ul>` : ''}
            ${lifestyleTips.length > 0 ? `<b>Lifestyle Tips:</b><ul>${lifestyleTips.map(x=>`<li>${x}</li>`).join('')}</ul>` : ''}
            `;
        } else {
            r.style.background = "#eafaf1";
            r.style.color = "#27ae60";
            r.innerHTML = `
            <b>‚úÖ No Hypertension Risk Detected</b><br><br>
            Keep maintaining a healthy lifestyle,
            balanced diet, and regular physical activity.
            `;
        }
    })
    .catch(() => {
        result.innerText = "‚ùå Backend not running";
    });
}
</script>

</body>
</html>
